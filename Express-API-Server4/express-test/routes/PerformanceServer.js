const express = require('express');
const Web3 = require('web3');
const router = express.Router();

// Ethereum 노드 URL
// server 1
// const ethereumNodeUrl = 'http://43.200.240.107:8545';

// server 2
// const ethereumNodeUrl = 'http://54.180.210.12:8702';

// server 3
// const ethereumNodeUrl = 'http://43.201.193.35:8703';

// server 4
const ethereumNodeUrl = 'http://3.36.183.216:8704';
const privateKey = ['0xb55a61acecf328d8f6ffeee39df321b0cbccc5e18993343be3384c788a531890','0x667692888fc9fe6885b39b93e3472960d051d7a3a989a9e9bb6f057a1cdc4f1a','0x236c58dc7a2e04013fde69eb3f67e1814e4085e0ec95a93630d6f0d5eec8de81','0x52df4f269ec77f6fa5c3157aa752e3b3226e59e9257e53f4e6e754714b1d12f1','0x307abed14142b4c77728a38d6f62c3f56ee69deb7054b9fbf105912edb14649e','0xc7a693140c839e2a78ed648f038126f4b73b99285fd5b129b6264c8dcde182f0','0x21edb473ca437a29b74776e8d87daeef7261acd51363fd26a1b142de61a4afd9','0x27d8acf1b2e50ae4851a684c3042a1f7273cf5bf1cd5fea6cd38b37db96f573b','0x15034d1a8c58c07e08ddc7807eac9b6bd03653a39861266c062eea1bb17a63c9','0x57d3711cd9a5e186d7b1f5cc050b18fcc341c58eb454d805fc9f2b0d623d3462','0xa3819bdff33d650403ad5cb021a1765d450256df22192d17e22c30ac49a4a593','0xa6a11ed5f27bd60fda84192a9f6b628cc076418352f30e11e954880f501e7645','0x3e92effb280bc18f0aa158f7cd16ca3397ad1e30b2add3338c864124c0d33df1','0x61c9ed676846cf542402185a90c5274b4b6f7649e3a8524a47336460219106ae','0x7147a77fc56e9ee918abf41ee113d99748598a0809554e9c233a4b53724bbe40','0x298b254e9d996d8f5b6b3d5eb3937842d8ce2bb7761688229bd40523b07cda7b','0x16426b844c1f2058b2364a071129dded2f833d385152ca6af205a12fd7dfd462','0x0ffeeb6f216dc4d01a1fbbb125a594b09741a82b4136c10040dfb28a1fb37b5a','0xe139b9383b9e0088c643a605a0f0c12e9e1050158681b73e96ab7d1001e3f69f','0x68613f3031be6fca8995e7e3a2ad63a27c7c8b061b2000124c80276b1302b0c7','0xe3e6095db120f0f00ed7919f4f94025a727d2cc462d1e1c6a441a39b9f9fac42','0x606689ad940bc1f3f23d6587d8b1660120b8b124c5d251d3cbb2583a7f69793a','0x0bffe33ec3f2315264291e8bfe1662de37a1c70934f9efd1b734df686d627f5c','0x7e47b4678d1da664a6893abf1d5954dd6e1045416e0ec14b86262e078520a5c4','0xcee00eda2454e00b4b04636254036bc22a0fd23c69932152f19ed3b61b33437d','0xd8d9b083b60554fad337e258563d40d456284b737f10bf46fa8d64c4af88c9e0','0x97ea2e3531804fd8d38b3f2d144163a4a7079df5d4bdb1b5960834ecce560bf7','0x158484046c9104be0602e91d852585ec972285d3a0797aa08e04f4e7453929a3','0x825bb83d3276ef9825beecc600625a01d62ee88d1884c1bd75f99fd38658bef5','0xc6e268883f1fcf2aeaf0b99e457b7648116285139182c5adc9d36b194b6b1423','0x545eca816d3bc3a6fac2219cc1009d30bb860e42138288829a24d4ed52ec0be0','0xd5b28713442c006af794afdefb500b243a2242ae52d498230b69c78f070c2e74','0x1afc85d3896f0499cf87c85516bf51900a043a907061678d43d65331db2610fa','0x9899e50d6427fedb7df072ec24bfae2bbf4ecbcd57b87edc0267d0b840f930f3','0xa1b510d58a8a27ad4aed7a7ba8ac4b4a2206225482a568cd101ecf5ee9ed28e0','0x0e99a37783a5a0484ea8ea490706407aa0e852a35f38ee4ab2e90dd8e6f38391','0xeb9edb2853239f17fee2f75bdadffcd16a6145fcdfea5ec8a1e8af8a9ca21df4','0x3ccce4c940a34dd7873b68a28a92611b3e6e2c9c690192c0fa5822462281ed96','0xa1f8f9c9ed01fe4295d8c4856f63f21b18b63b3b4f9c9d4761d6aef8686e11f3','0x7a00ced093328e4a6ffd25dd50551bac0e036f3010576bc0107869d7ccea1b74','0x5841d0d692cf605bf2c372104112da46dfa96eb5ec7e6bd28073c3b76f68956d','0x787812fc84614b7b2f815daccc1a1c6c110d06b0fbaec8df31f2e5594cd0f886','0xdbcd033d7619cda390d264f9800fef5ae2fcec6e5ebe2e4a6e4a1082a3fe5f32','0xf562a0d9656507cb8aebbd7a0dce9b3b13dea0bb778f8f116190d4637df0407a','0x7a86a370dce70bccee7c119352569139fae2d5ea7f2fcae87033104b680cdc5e','0x17597ca6218f8cf06ceb680ce8faab75f7985e9e2547c6e4f0b1731ae4f9b62d','0xd216ba04dc1b8b2315045e91af4630e939ca7dc1330f8b638a6537e1ddfa6ac6','0xaa08bdb787b779fb69e30f291ef407d893c85deb26cdcc7c4347f985f15a3744','0x59202405dde44a8e1af0477d9e353d49f25391822cb2a5eca4c71d01fbee7468','0x4cdc37de7bcd21f54e5674aa0b5854905cb834849d5a9de21c03e27e49831c92','0x442dd68682a884c20de7b5468a29c9141e06208cbc46b58df9897e0265ad4bef','0xedcfa1b1cad7429709dce571eac7ac2cffae175fd605423cbb802cd3c1071a5b','0x5aa3245d2c0280c86eba4fc07362576fd3791430a9c6af7dfa5e553e12534f6c','0xbacfd71c07da55148b99f8f20f8ea23ba90b774cb4f4104b309c2e75a144271d','0xfd56cf6e3523d88b79a4e26868dd690981d3d8019ff0f1188b537cc1f1bf516a','0x4276aef5c0eb7ba4196b0326935b27a4fd3ffb2a36099551f8b5f74a2730f406','0xd6b921d1fc098e15b645bab6cf8c2ad77549e920f353ff0eefe9eb4ed1ee94b0','0xd224c92261835c166991af8dbe5d79b9770399e59a9e3cf9e406a979fd2b47b6','0xa65184b9b44fd603f56f7a5627f488de8b7aa4d9f14717c5e07289c4d0344d05','0x85edf851ed8c6d552eb7c0a0414c5f7a977e23b044b66ce43260f93b79c6c655','0xad1959366ccf61bec32d612109e7c184a491878d3c8509fb44253b7b54ae6dc2','0xc386b00a1d7a63de49667c06fd02d6df03585217609093434695dd71293bf5b5','0xaea8c5f2c07c68c1a3a6fa7c8088c620d77512fc000c49512e9144b90c8fb35e','0x9176ef66c18da8f3cb684c682dfa4d52ef361474e3e29d5279c47d7513e80262','0xa11a5fb2f4b60153d420811c769d19eed4d85ea6c4585146cf06c9972bb373bc','0x9bd6fed9c8e2e88a534f17b17cda6e2ab065f089ad50dc7b93922e7d6e7a4431','0x0ce18db0bfcf1ce535be8de42ff294594bdc05ee602629f2dd504f00c678613d','0xf7e6ca063ee4121429ce3e4703a3f23da5828fe1b58b27c2a9a30df6ea20bde2','0xd673bb073aa5a471a530ca1ea8a42797545df2e5672541ebe25348c10d6054f8','0x0fd357623d47dccd36012659dd81384f65f517857129a1c792e9e818bf236344','0x5f061661fddc827d2bd4f99f08c75113e1bb242515daca9aaa85b0c913a4ebb9','0x94c1424e0e8a6f5f76155f1e103ee45238e8774015a306d54515615e22547eb2','0x1cb9458026a73ed66f073719f5a51ecdfa3c7ff9376992f6fc9c6778e8ff6fdf','0x69c327a0e9e6578f05ee890f4d9e5f6f4fbea22b3abf3aad8839bffe33aa5c97','0x31a3b7e79a4e87882a8729ff21776b13cb6f70a3e5f05f4c3eda23719546b4cc','0x7c6461445adad6b6b4218677a58f5e98dffbf44fa9a854900f9ae08e21149f36','0x250518736d8b34b99c373dd284eebd364f31f2df8ec0e969f1ac88cd0faa40dd','0xa82b965be458c269d04b47ee5983073a9e03d074547412a1e1cbd10a66ac1857','0x2662f259b33dbf2b3eda168f897f67a2dcbeb9a4260b1ed75a126d40fa8197c0','0xd124f14e59f4268c1b94d6d465d52eaa3a7d04b8381992961fd03f70c0d4e07e','0xc1513804381634e04507f9a06654849e01a582c915b81dca83d3433f22aa1648','0xe246b976ee010e8756b4a7db33a80e39f61f00e742719cec28bd0ae757c37f5c','0x9cd8fd8db211448758a47d32adb9d2afc0f4916792162336600af7f77fb3c980','0x9a0c5f3899400d9b5b21eef36d4458854a19c5e80dd8caad1b101965755f97e3','0x3f6cbda19b4c799a7a5936411255ddfb87b9c2ff687367235754e59f92279eef','0x93ed864790dc09809d48ba916605cc82af5bc4af84dac176fc7f1a1db387e0d8','0xe6fcc30b7a5ec845e874e0cab76a4a47799c4f1916efa5adcecc85cd9976aed9','0xc8a9d8e032d980ae4271f5c8e869b56e521ac8c8cf2112574fb03d901f6487a3','0x2e3022521170868ff976d0e9ebf4440f54d2341e9ec8a872f0ac702ddf10d993','0xa517861d41188c4b3bd51778021b4c2c8dcd423af832c2f0ef635411bfee1ef2','0x5e920ae4c8829cdc9476b2f6e66c0c4e599c5b6efc74d4cefd01c9cc19fda954','0x768fc898e4700fc31dd636f2d80c83c8f13aec72819c097a72a4ee234b17b14c','0xeda86327af8247b1c035dcf688e724ee20a5c997aaf634060b7727b978397b32','0xb67b826f7658332f453c3170d7277134b0cd3c359ebfc66772de953cb7a1229b','0x3950ec70977d6815d042fdef3da69ef899f64ae3408761d2c18c85a82daadc54','0xe3392ae5a63585891191b2f64cacda3ee43af6fbdfa6d7b67fc5fe55a558833c','0x23f1511bf0ed6656a0cebde4c75de48278a3b583bbf27a50d85646761aea7785','0xa7f498b8abca06b075084c03af570dff50393d30c8722e53d81fc781f2e5cc30','0xcf68ca88fc660777b36eb126819acbb426dec07e3b6a3ed28c73517bab8a8220','0xf72bdc917b2f99a3886de32b6def233f521902a1ee3e9a8b68911ebdda557062','0x82991d20ec91ad4395e5270ab7a5b6dbbec7f8334c5e7354d24edf825c9cd4ef','0xea57c482851da516a7fbd9959809d0a8f8336fd0b4ca5466075d7d634c65c2aa','0xcaa596726b6b96ffbea39e4711b7269a20ca80024f89ada3f2bd967378127bf2','0x7f1c25e7daf870dd8adb7543ff934d502b67a6d350325238512d1ec0b6d9eba0','0xd84dbe19c693c31f639d59b4c846b3d32eeee759dc30bfac0d70d84def02f9ae','0xe8c90928f9f8f4fe1a852d7188a69a86a58aa75da33aa2105d13d58d5045aa19','0xe3ba9c9250531a38f599c1d0389b95fb5e0cab24b6f305341030a1a8bb536c36','0x92b22de982fa331a7f0cf1fc5d9d3141ba1bd202ce422cac388fd24ff7e949a4','0x42e4792bd7776ab60bb190e49ea1c21648642bc0334af92916ab2ba05c8847f4','0xa3960ed85440e5e3babffb2006e1fcdfa9d4cca669b1ea9cb33e996c80b5e05b','0xe57f63afa86a7f83bcc498d06b18c12ca9605e8c2c6b56ad5346b1b180c8b75b','0x0d0883fb2b8520835e44b73cdc80923f9b92fa222130f2664cbf796e9478f488','0xd8d04a23fcf39b35e6c285f023a48a98e1a4691f2b1c6b8a8f029a805970a656','0xa33818449e82818596453c8c965e6226381f5aec4379140d027c1b8ac316f4d4','0xcad316a9ff5a3279d301a7bcb701591c08bdbddb493b4fb2169ba52846202312','0x0de8b94be2d501870082141683b0ae314be8d37cda4757fe282ee412674264c0','0x8444bed778cef8c186f18c0d342482181d77baf24e857fdfa45c270725a4b510','0x7975545d87cb4e3036da87b5f32503fdf93c171f0a6664b67a0a6b15377dd1dd','0x62eb8f52a8896c5cbd0cef16cb9b902c1dc460d96eb4eab1705a1bcca5a75472','0x9c85f8c9e1c7365a215e76ecc8e3a5b5095cc568bbe12bbce7bed6b87f21942f','0x40198be82c2b1d0f679711820332dbdfce95580f50b8415f74f8bf4eaa7c8b1d','0xd9459c706e1321b66694ec809e8c31609f8a60b4058626e9c1518ced343a1eb5','0x7f650cbeadf230420835beb6e8ce482e611aae7ebc2d0bb7c90b68a3b5c44136','0xc046a0829dd687d55b1e47a9cd4bc8fec41eea64a64e8a1d2c8450c933ee9936','0xcd2ed5e77481fea6f6a64b166dbd0a2b0b5acd884571a06cf4cb57d25fa0adcd','0xd0ac40daf6284b2f462bdeba63d1985a868e337adf6d54c7f0be7a08363d2599','0x79bdd2a49b48dafe5801bb97a3e62b89defd54b38d904e8d3d806cc6533022b4','0x49c6b5f5d07d7367c522843e12e68f76c058c2ae501b8a96ada677b9b0ad018d','0xfdabf40d39a2528bd28f9a9e74beb356bf0584299b9e35f589e87bc6e3571f2d','0xe6a0f1228c6e1aa306a58a0bc933375d56ca7a83cbc4367ee116f4dcb7db7655','0x45a16826b400010366baabf2cd4002849663f893a76972edfae1020e3405f37c','0x231ad4beff2fadd24a7174c2bb081dd97433cf5ef0b9da33b66c267ca8b68c72','0xcd43a280c171b2c8c7c95d81877f5b542b567e49ceb5b953c25eb8d7f990f360','0xf9b599e963ff521fc48f439800d32d0276e3945bb9f410a7383532e610db489b','0x1c18aebc689140ced46dcddebc1dbd19b6665f98ac98a5b5ef5cbec3d2a6302c','0x7632ce5d7cbdeee7a79f467bda66cd7de793984f409cfb4eb5bbf2a0c011d34a','0xac4126c15dd0d278320521575de5ffc937a0de1b8a100a1cd948270fa43c626b','0x45c8bf5c73cf817e1e21c6bf8c084b1a85ae796ad17761cab3bdfdf6a005a828','0x2d7606e88382b1f7b463c8de02448e4c314c74ff96110aea724e7edd614998e6','0x034f459ed2a4e88a821ed312a4e81f37b7341030fc77c3892878ae68c1bff8fa','0xafe1924d84aca01adf2643047b61f82a0a7d0fc46d629a165ed18f5b906f7f16','0x9320057ad801dee2bca5e219707875c34ce848e29f1c6e60cecfb20b32667812','0xcb81e5bd1fd23f1efbf4c83adda7bcd4d70543d455919e478f51d76c7a4e8078','0xce5ded3f45059035307a357404b8bb5ec293f45fd3a51b6b201c2f7a37e9f20c','0x085b98cb4f41e254ec1aa087d6c70f6b2932f17b8f923e7a851d7e38b24d1814','0x64dbb9315c6866fe131cfa8012d5ac52e46d48454519a7ba3bdeddcfacd3fb5d','0xbbfe12c8051cadee8619ac06c5d0d12a34d9940db2d3d996aaed17345084c664','0x8832b693a8de90f4082ce1769227c6f62ad2cbe0592e5332727808ea7cd1ccde','0x80f1c7537edb075b962db2d86c451aa06e9dc2a4e78bb4b14bf1f5697788dcbc','0x47d92d51bf40a0e35b71b869a082584a7d1aa6b197bf94470c41739a868e618b','0x688063e086619754473d3c212157bc8011324c029959d14902febc977876bcd0','0x8685430d00b7f702d97b9573fdaf6e9d5ba8cb1bb6fb9646dcb4ad1996514008','0xd3d45b82aba99966c6f3cf6117593e017562eb9782ad87f3920882e4435e21f7','0x19081a8969e06ffb12bf5cfca6fd44cb3991c849193539cdd0fca66393ab54af','0x372cc0ee8abebee7b0b279fc6420a9d335cee60b7f4861e8500f405a60361bf0','0x74b794fceeffe97c219906c810d7f52db6aa096aab7532522be172a54e78a143','0x27e29205dbdfaf8ed061037951eb16fc5ccc40f7ec0ef3b0d1f8b23ea46e2390','0xa3e3a1748d1939ebaca60981abccf480ab4296adaa263115a9347eb6833cdff7','0xccbad7b4640716c92c2e699b405d1509430d6f85b90f87b21c865141d0905e26','0xe50746bc0a09f7a057758994e1f4d5beda3bf23d4f00dc80196f9ead4b8cee1e','0x542e962d6a9e0aa2f3c1d8e274db2e673c223921c5beda310c26ae8b6426e1c0','0x2830b74430cdcb59f1ad83394415c41078858b8f05a3230d52494f2e04eb6b46','0x93cdf86ca60ad30e104a8eb9070dbaf520a344afe728a89ab2b01b33338bccb3','0x33ff41b2b76f034d67301a3bfd11674ae11bb6d516e58fc2bf7db7392bcc893a','0xfb8a6092b5fe208432a9ba4ec58b6e52ad1a6bf3e8cce0f8e6ce69ec1ee063df','0x8bd6c1e21b6e090e154da5d92fac9617480cb5e5eab354c24b025ff6dc2e4fe3','0x0c253f3a6292595932942bfc1bcba5fb93001b98cbe63c90c716c542cb331137','0x5fb32e1131da281e752e415e7a6e4273b0e5958db9de618a85dfc2c506a9845c','0x2370f1ecf623b4032cfe4aef3e78eaca8ea244290511dce8241f6ac4d8bfd8de','0xf82dd52a81d2f4f3e920408f65313ce5dbb24112c354315b8905745393cb8f34','0x5bde852e07d9b1d8275b188cefb18b1b4789b539417e60b174e1c1f5976c4af9','0x3fb0814557afc521529c0a32db05788a2aa68f06b62431230854b6d781759f0c','0x56c48847df81cb6af49457ffd259b86a6f8c0a90973a59de07078121b280e48a','0x3abe1a96409bb4b9f1937a0626467309032761daeb12256dcc0219eb955e9579','0x0b340662b63817c151afe5de79828834896788c8c241f908d02afc5ff1b6cc89','0x00876b2e98fb2b9ce5562448efb8b20e48cea5aa5adc94257cb3cbba56516141','0x62dac3269186dd6567826268242a9a7ddfdc3e734c322ec4f930ebcb878a0183','0xef7c9183a297f151dc1221a7238849d9a551e38e1b06e69f70048a34b452a0fc','0xbf41be0b8daf65a4beb114eb3f127f65bafbde1d2e24f49590c329c5071a43d2','0xa2581288d2015c0037f012e68f8b6c936a1984ab3aa153ee7cacf6c9856f1353','0xb386eabeb1d20888e2a6522dec990bf2fb1908e853c3d9540c4b4bd41b0a652b','0x081ebc3a9572cc076f99eed97dc2ace92f8edc2ee9dae63301cec4981a945f51','0x16519d81660d54064c4b1c1bf29e9ef97157ef7b1d89c8a6c30d4d2fd2967f1e','0xe1f3bb3ae403a8f47727a274ed7f74fd34d8c86fbcbec2640cba7dd53264cbbc','0x83edf9e61f84c3a12d61044580644ad435b1d1779c27aa7a3bc4d0c8a76cd3a6','0x947e466da8b7d435fa0106dcbd382bd7e03d4ef665110ddd084df52b6bf57c62','0x730b338424fbda0bcd32a203cadf34f1754054d1b82ccae012a5d0aca74f9865','0xc4fd8aa7eeadbe0e709ee084e21da44dc859cf112df91782349589bc3256396e','0xc50ae880f955d628dbc4a02e26a90659ae305e709467e2dcd412e4bac1ab1682','0xdfa3020fdb43199ec5cbcc0f5494c31d1ac56b51c62b7e3f812050030281608e','0x63599b33f6f81eb83cbf862924e924812012f1a5f52d841b3e34eef888ca19ef','0xe07a3b2eee661337a991f8db60766d9a3831e7badad289903a67a41913953cb4','0x509bc2322a5b357f8f016bb2ce0e01459e76590c9f7d808a4aee2897140b5e62','0xdd36c53daa9f3b59531e9b0cb0edc142a9a9ebc261bcacd9e2d15d7c56e76b0c','0xd27cfda057c6f08e89d699cf09e67a6aca8a78a58602c69fc1b65b8205b2171c','0xe9067620c8d994192c5fffd8dbf6e3254f07afb9294187ba7b7c38fd4d74c29e','0x8cf0cad82320bac406f5b890304f116536cdf6bd7de0d195a154ca0c1ae085c2','0x3344b31fb9fa949d156473976189f1192654d93698321247ff2606642686ff18','0x45905bc074072fbf0983c67b01b1e50c59ace377bb5dda9f16c2b6dbffd25f5e','0xcec5247072a85c80a67c34d0af87b118544781828bdfe5122d2581da7d48def1','0xe351c20ea74b0951a9be9c0f2a88b7690c241a76e529469b8b9d3f97299a0405','0xd6319c3a29d481d9421dbe4aca9cbaac4fde36c37b0a4474c78199724020a792','0x8a844b540218147b64e80e2121313974fe0580e43bf4e28369a7f2008f633b73','0x108ca3d4df42a58bbaafc0f403621a6122615585c66fa86aafd41e458aa0f699','0xc0eac4badfa837145de8aec06d8cfc84a387b257d1ee7fe4c19365672efc46fa','0xae14c21206b383822512eb1944f9f5fb22ed55a8b579277336539ac887d09253','0x8f67b0e883808b7922aba6f4852b4f3cb1dc3cc24d711fabc1ce2926b79062da','0x8c7de5450a81649c161bc2d62d05f6fc5fe8a7d13798b49b97cc7b8624962883','0x7d312dc9c5fff4aec911a9b5673e37a2be016cb523103f6bed926e9eb18f05a8','0x03b68d8d53b7623246846d6919c764db31a2b0d17b6db404c9ca468fc67d8493','0x0369a76dc64855638c94ce01c60ea4d18976eca488dc5f1b4ed5a0de61952950','0x3604f89c8b96535492bfe2eb8cf39c3afdab485ad8b449ad0f21eba7faad5fa2','0x3892cfa5cd5466cb3cf12dc6ec9c295462dc08c3602344f82d4ceb1f704f07db','0xf61352b812b66cf3803e56aeb85ac7396a5dfa3e4f3ee09b34bab4f6af4d3b97','0x0a2573e34c7d1a96be8c7c2ab2de30dddba5154e9ade81b23cc204a36dee6699','0xa86fc274982b732e5ec669d583a430ff5938855357b9bb3b314609427bfdf946','0xb49d6227f3ca23b07444c31c2e6164772aa1c37dc8f97598bbab6e2be506ba8e','0xeaf7eaab760111eee0ec9dd51fbe96562549231f94af51ba468cafab46641c0f','0x952f2ec8e4aefe293fe7d17aba1a69bb2a57d75c5b5460a09b58c65e52ee5767','0x9db1bb47f068924e29228bf88d0331cd699b40512d897766d4e3450f58fcc6cd','0x505bcb7e9334adb5ff8d8b1200542b68e6aa0f3638be94dd17a36eaf7e3502ff','0x6499242756c2c01ee3b5242046dede692731eadf7bc30a815df97c87ccf974de','0xadeb51b6976444d60a447f839b23a1838c4fc29120e98072b77d2c89654ae062','0x3538885f7ca2fe049cca33263ed5c770f6ed938978c568651aa80fd5ec131eac','0xdfd78a956864c6f196d33810eb3c7c5696a4075a4480b6cfa3a7e67b47c686e0','0xabd6a7dcc0d7b24c9de35946481b80fdb1a1ac46491c19eddd7c5e2c65e5ba85','0xc091562d02d63e4b1e4945979353a281092b6263f741349fbfebcc90a1d069f8','0xc87ca8409eaa44788e317e6873fbbb9551302dbaa772605abc155b41ffd032b6','0xada20c26492bfe438c7eb27934c6460c68ec3bfb248707603da6fd1aa3cff727','0x1d40127022c9d83deeff69e7b9510629e63ebc029947f711d4af3372102049be','0xb631ec8fe21ed9fcbe3b2a3516921ed2def1d5a5e6c86c89300570d906cf5373','0x1cf92ce068a36f2b79e2e951dc19e85e623ba5c19f8c7cebb818aa5fc453e9f6','0xd150dc499f00bcdaa4454221360731e20cf6158e0b20f9aa69c210dd7e577427','0x21418d978b4cd6ab4965b42a5fe63d4646f25012354c4a5fd0d4cd7bd3a05029','0xf81acf8259edc93eee44cd4ceb1eb1769739b79c1fdacdf0078a4aee47ff2b93','0x1ae11d503fbed2c3bb18012780822c21b66b077ff8e01b8f611085c40ad45a5c','0xbeb3e81f4d2d58d81403edaddd52ad128b302baca28a1fc90c27886133a6b5eb','0x24afb7018e34ad8920e1f65a81b8d86311496d3528c3bfd53af887bc0ba62f8a','0x2acfa97ddfa809f2f24e88b99758f43ed1039f4c9bda1c095f7cf56d7287ab0e','0xf96044c4c7c82359b0111e40fd86fe7245b7835990679ab39c11ee59f40d8585','0xef1b7a13da9b4a007f14069925b9abecc6081438177d779dc7c32293f26f6df7','0xcbbf90dabb897fec7ddb7264821f4119647920c454537b892f2c4cb236dc6ff1','0xd680525b552bd40ad3873e6fd375871901f96e363bd190d209e663f6e60911c8','0x30ce8792932dd4d53ac8a20ec511b3c6dc94b5e46ef1c19549cb9a6148c54945','0x1f5342fdbb1cfb9c58396e34e7326efe4443e4abed238b5bba559efb09d9a51b','0xe3f8b2a5663f5c61c7ebda51e864f53ebabd4dd3ef5968f03bc3ef93054b932e','0x5ffd545bbc8ed230513eb66b46849b7d14e35797c5cfb24873dde44c68479f88','0xc52d1ffc814f2160bee30f0d8e55ceaf9684ee577b16f2833bda7a75ab1724cd','0x0136c75b07dbd8acc94d5c7578047b42b7aeef6ed8b942dc74f3f052d50ae825','0x72e1d8465207b709df6e730b0074d96959e45a4d2d0628a782e40c40ef66422e']

// 웹3 인스턴스 생성
const web3Meta = new Web3(new Web3.providers.HttpProvider(ethereumNodeUrl));
const ContractAddress = '0xB07C758b16c43C01D4e182FAd97D8E8Ad85e0EA1';
const ContractABI =[ { "inputs": [], "name": "amount", "outputs": [ { "internalType": "uint256", "name": "", "type": "uint256" } ], "stateMutability": "view", "type": "function", "constant": true }, { "inputs": [], "name": "recipient", "outputs": [ { "internalType": "address", "name": "", "type": "address" } ], "stateMutability": "view", "type": "function", "constant": true }, { "inputs": [], "name": "tokenAddress", "outputs": [ { "internalType": "address", "name": "", "type": "address" } ], "stateMutability": "view", "type": "function", "constant": true }, { "inputs": [], "name": "transferTokens", "outputs": [], "stateMutability": "nonpayable", "type": "function" } ];

// // 이더리움 계정의 nonce 가져오기
// async function getNonce(address) {
//   return await web3Meta.eth.getTransactionCount(address, 'latest');
// }

// 서명된 트랜잭션 생성 및 전송
async function sendSignedTransaction(rawTx) {
  return await web3Meta.eth.sendSignedTransaction(rawTx);
}

let contract = new web3Meta.eth.Contract(ContractABI, ContractAddress);

// transferTokens 함수 호출 데이터 생성
const data = contract.methods.transferTokens().encodeABI();

cnt = 0
router.get("/transToken", async function (req, res, next) {
  try {
    cnt = cnt % 250
    // account 불러오기
    const account = web3Meta.eth.accounts.privateKeyToAccount(privateKey[cnt]);
    cnt++;
    // 0.5초 대기
    // await new Promise(resolve => setTimeout(resolve, 500));

    let nonce = await web3Meta.eth.getTransactionCount(account.address, 'pending');
    // let nonce = await web3Meta.eth.getTransactionCount(account.address, 'latest');


    // 트랜잭션 생성
    const tx = {
      nonce: nonce,
      to: ContractAddress,
      gasPrice: '0x0',
      gasLimit: web3Meta.utils.toHex(210000),
      value: '0x0',
      data: data
    };

    // 트랜잭션 서명
    const signedTx = await account.signTransaction(tx);

    // 서명된 트랜잭션 전송
    const txHash = await sendSignedTransaction(signedTx.rawTransaction);

    res.send(txHash);

  } catch (error) {
    console.error(error);
    res.send(error);
    // res.status(500).json({ error: 'Something went wrong' });
  }
});

router.get("/getBalance", async function (req, res, next) {

  res.send(contract.methods.GetBalance().call());

});

router.get("/getTotalSup", async function (req, res, next) {

  res.send(contract.methods.GetTotalSup().call());

});

router.get("/hello", async function (req, res, next) {
  res.send("hello")
});

module.exports = router;